<div id="portal-anigeek" style="width: 100%; margin: 0; padding: 0; font-family: 'Times New Roman', Times, serif; background-color: #fff; overflow-x: hidden; -webkit-overflow-scrolling: touch;">

    <section id="hero-slider" style="width: 100vw; height: 75vh; position: relative; background: #000; margin-left: calc(-50vw + 50%); overflow: hidden; transform: translateZ(0);">
        <div id="slider-content" style="width: 100%; height: 100%; transition: opacity 0.6s ease; will-change: opacity;">
            <img id="hero-img" src="https://i.postimg.cc/sDL0s4nt/Portada-One-Piece.png" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.75; display: block;">
            
            <div style="position: absolute; bottom: 0; left: 0; right: 0; padding: 40px 20px; background: linear-gradient(transparent, rgba(0,0,0,0.95)); color: #fff; z-index: 5;">
                <div style="max-width: 800px; margin: 0 auto;">
                    <span id="hero-tag" style="background: #c1121f; color: #fff; font-family: Arial, sans-serif; font-weight: 800; font-size: 11px; padding: 4px 10px; text-transform: uppercase; letter-spacing: 1px;">Análise de Capa</span>
                    <h1 id="hero-title" style="font-size: clamp(1.8rem, 7vw, 3.2rem); line-height: 1.1; margin: 15px 0; font-weight: 700; letter-spacing: -1px;">One Piece: O clímax de Egghead redefine a animação moderna</h1>
                    <p id="hero-desc" style="font-size: 1.1rem; line-height: 1.4; opacity: 0.9; font-style: italic; margin-bottom: 20px;">Direção de arte sacrifica consistência visual por impacto narrativo.</p>
                    <div id="hero-meta" style="font-family: Arial, sans-serif; font-size: 10px; color: #ccc; text-transform: uppercase; font-weight: bold;">10 de Janeiro, 2026 • 6 min leitura</div>
                </div>
            </div>
        </div>
        <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: rgba(255,255,255,0.1); z-index: 10;">
            <div id="slide-progress" style="width: 0%; height: 100%; background: #c1121f;"></div>
        </div>
    </section>

    <nav style="max-width: 800px; margin: 0 auto; border-top: 1px solid #000; border-bottom: 2px solid #000; padding: 15px 5px; display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; font-family: Arial, sans-serif; font-weight: bold; font-size: 10px; text-transform: uppercase; background: #fff;">
        <span>Manchetes</span><span>Análises</span><span style="color: #c1121f;">● Ao Vivo</span><span>Tecnologia</span><span>Opinião</span>
    </nav>

    <main style="max-width: 800px; margin: 0 auto; padding: 30px 15px; background: #fff;">
        <div id="news-list-container">
            <article style="margin-bottom: 40px; border-bottom: 1px solid #eee; padding-bottom: 30px; display: flex; flex-direction: column; gap: 15px;">
                <span style="font-family: Arial, sans-serif; font-weight: 900; font-size: 11px; color: #2c5282; text-transform: uppercase;">Mercado & Indústria</span>
                <h2 style="font-size: 28px; margin: 0; line-height: 1.2; font-weight: 700;">Sony prepara hardware dedicado para streaming: O fim dos consoles físicos?</h2>
                <div style="display: flex; flex-wrap: wrap; gap: 20px;">
                    <img src="https://i.postimg.cc/sfHMcTDy/58awkrh8lp404dsegeqpbffcz.jpg" style="flex: 1 1 280px; width: 100%; height: 180px; object-fit: cover; border-radius: 2px;">
                    <div style="flex: 2 1 300px;">
                        <p style="font-size: 18px; color: #333; margin: 0 0 10px 0; line-height: 1.5;">Estratégia da PlayStation para 2026 foca em dispositivos em nuvem.</p>
                        <div style="font-family: Arial, sans-serif; font-size: 10px; color: #999; font-weight: bold;">11 JAN, 2026 • 5 MIN LEITURA</div>
                    </div>
                </div>
            </article>
        </div>
    </main>

    <script>
    (function() {
        const noticiasCapa = [
            { tag: "Análise de Capa", titulo: "One Piece: O clímax de Egghead redefine a animação moderna", desc: "Direção de arte sacrifica consistência visual por impacto narrativo.", img: "https://i.postimg.cc/sDL0s4nt/Portada-One-Piece.png", cor: "#c1121f", meta: "10 Jan, 2026 • 6 min" },
            { tag: "Mercado & Indústria", titulo: "Sony: Hardware dedicado para streaming em 2026", desc: "Documentos vazados sugerem o fim dos consoles físicos tradicionais.", img: "https://i.postimg.cc/sfHMcTDy/58awkrh8lp404dsegeqpbffcz.jpg", cor: "#2c5282", meta: "11 Jan, 2026 • 5 min" }
        ];

        let index = 0;
        let timer = null;

        function rotateHero() {
            const heroImg = document.getElementById('hero-img');
            const heroProgress = document.getElementById('slide-progress');
            const sliderContent = document.getElementById('slider-content');

            // SEGURANÇA 1: Se o elemento sumiu (troca de aba dinâmica), para o timer
            if (!heroImg) {
                clearInterval(timer);
                return;
            }

            heroProgress.style.transition = 'none';
            heroProgress.style.width = '0%';
            sliderContent.style.opacity = '0';
            
            setTimeout(() => {
                index = (index + 1) % noticiasCapa.length;
                const data = noticiasCapa[index];
                
                heroImg.src = data.img;
                document.getElementById('hero-tag').innerText = data.tag;
                document.getElementById('hero-tag').style.background = data.cor;
                document.getElementById('hero-title').innerText = data.titulo;
                document.getElementById('hero-desc').innerText = data.desc;
                document.getElementById('hero-meta').innerText = data.meta;
                
                sliderContent.style.opacity = '1';
                
                setTimeout(() => {
                    heroProgress.style.transition = 'width 5000ms linear';
                    heroProgress.style.width = '100%';
                }, 50);
            }, 600);
        }

        // SEGURANÇA 2: Função para (re)iniciar o loop com limpeza de timers antigos
        function startLoop() {
            if (timer) clearInterval(timer);
            const progress = document.getElementById('slide-progress');
            if (progress) {
                progress.style.transition = 'width 5000ms linear';
                progress.style.width = '100%';
            }
            timer = setInterval(rotateHero, 5500);
        }

        // SEGURANÇA 3: Detecta quando a página ou a aba volta a ficar ativa
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) startLoop();
        });

        // SEGURANÇA 4: MutationObserver - Detecta se o elemento foi reinserido no DOM
        const observer = new MutationObserver((mutations) => {
            if (document.getElementById('hero-slider')) {
                startLoop();
            }
        });
        observer.observe(document.body, { childList: true, subtree: true });

        // Início imediato
        startLoop();
    })();
    </script>
</div>
